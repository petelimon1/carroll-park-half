<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>New Era Results</title>

  <!-- Shared nav styles -->
  <link href="assets/css/nav.css" rel="stylesheet" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    :root {
      --bg-tile: clamp(240px, 40vw, 520px); /* responsive pattern size */
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Inter', sans-serif;
      text-align: center;
      background: transparent;
      color: #111;
    }

    /* Mobile-friendly repeating background */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: url("cph-background.png");
      background-repeat: repeat;
      background-position: top left;
      background-attachment: fixed;
      background-size: var(--bg-tile) auto;
    }

    /* Soft scrim for legibility */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      background: rgba(255, 255, 255, 0.55);
    }

    /* Year selector card */
    .year-selector {
      margin: 100px auto 20px; /* space for floating nav */
      display: inline-block;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      padding: 12px 16px;
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.10);
    }
    .year-selector label { font-weight: 700; }
    select {
      padding: 10px 12px;
      font-size: 15px;
      margin-top: 8px;
      width: 100%;
      max-width: 280px;
      display: block;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.15);
      background: #fff;
    }

    /* Results card */
    #resultsContainer {
      margin: 20px auto 0;
      padding: 18px 16px;
      max-width: 740px;
      text-align: left;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border-radius: 10px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.12);
    }
    #resultsContainer h2 { margin: 4px 0 12px; font-size: 1.6rem; }
    #resultsContainer h3 { margin: 18px 0 8px; font-size: 1.15rem; }

    .podium, .finishers {
      padding-left: 1.2rem;
      margin: 6px 0 14px;
    }
    .podium li, .finishers li { margin: 6px 0; line-height: 1.4; }
    .podium a, .finishers a { color: #0f4ab8; text-decoration: none; }
    .podium a:hover, .finishers a:hover { text-decoration: underline; }

    /* Static intro card */
    .content {
      padding: 20px 18px;
      max-width: 700px;
      margin: 20px auto 40px;
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border-radius: 10px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.12);
      text-align: center;
    }
    .content h1 { margin: 6px 0 12px; font-size: 2rem; }
    .content p  { margin: 10px 0 18px; line-height: 1.55; color: #222; }

    /* Carousel */
    .carousel {
      position: relative;
      margin: 24px auto 6px;
      max-width: 820px;
      border-radius: 14px;
      overflow: hidden;
      background: rgba(255,255,255,0.85);
      box-shadow: 0 10px 28px rgba(0,0,0,0.12);
    }
    .carousel-track {
      display: flex;
      gap: 0;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }
    .carousel-track::-webkit-scrollbar { display: none; }
    .slide {
      position: relative;
      flex: 0 0 100%;
      scroll-snap-align: center;
      min-height: 300px;
      display: grid;
      place-items: center;
      background: #fff;
    }
    .slide img {
      display: block;
      width: 100%;
      height: auto;
      max-height: 68vh;
      object-fit: contain;
      background: #fff;
    }

    .carousel-nav {
      position: absolute;
      inset: auto 0 8px 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      pointer-events: none;
    }
    .dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: rgba(0,0,0,0.35);
      pointer-events: auto;
      border: 0;
      cursor: pointer;
    }
    .dot.active { background: rgba(0,0,0,0.75); }

    .prev, .next {
      position: absolute; top: 50%; transform: translateY(-50%);
      width: 40px; height: 40px; border-radius: 999px;
      border: 0; background: rgba(0,0,0,0.5); color: #fff;
      cursor: pointer;
    }
    .prev { left: 10px; }
    .next { right: 10px; }

    /* Hide carousel container if no slides are present */
    .carousel.hidden { display: none; }

    @media (max-width: 360px) { :root { --bg-tile: 220px; } }
    @media (max-width: 768px) {
      .content { padding: 16px 12px; }
      .content h1 { font-size: 1.6rem; }
    }
  </style>
</head>
<body>
  <!-- Nav is injected from nav.html by assets/js/nav.js -->

  <div class="year-selector">
    <label for="yearSelect"><strong>Select a Year:</strong></label>
    <select id="yearSelect" aria-label="Select results year">
      <option selected value="2025">2025</option>
    </select>
  </div>

  <div id="resultsContainer" role="region" aria-live="polite">
    <h2>2025 Results</h2>

    <h3>Top three</h3>
    <ol class="podium">
      <li>1st. <a href="https://www.strava.com/activities/15881806162/overview" target="_blank" rel="noopener noreferrer">Tom Germano</a></li>
      <li>2nd. <a href="https://www.strava.com/activities/15881377773/overview" target="_blank" rel="noopener noreferrer">Will Curiel</a></li>
      <li>3rd. <a href="https://www.strava.com/activities/15881543043" target="_blank" rel="noopener noreferrer">Tom Morgan</a></li>
    </ol>

    <h3>Finishers</h3>
    <ul class="finishers">
      <li><a href="https://www.strava.com/activities/15882550947" target="_blank" rel="noopener noreferrer">Kenny Kusiak</a></li>
      <li><span>Josh Berger</span></li>
      <li><span>Robert Kendrick Holmes</span></li>
      <li><a href="https://www.strava.com/activities/15882586026/overview" target="_blank" rel="noopener noreferrer">Annie Muire</a></li>
      <li><span>Anna Katrina Lockwood</span></li>
    </ul>

    <!-- Photo carousel (add <img> slides later) -->
    <section class="carousel" id="carousel" aria-label="Race photos">
      <button class="prev" type="button" aria-label="Previous slide">‹</button>
      <div class="carousel-track" id="carouselTrack">
        <!--
          Add photos like:
          <div class="slide"><img src="photos/2025-01.jpg" alt="Finish line celebration, 2025"></div>
          <div class="slide"><img src="photos/2025-02.jpg" alt="Lead pack around the park, 2025"></div>
        -->
      </div>
      <button class="next" type="button" aria-label="Next slide">›</button>
      <div class="carousel-nav" id="carouselDots" aria-hidden="true"></div>
    </section>
  </div>

  <div class="content">
    <h1>New Era Results</h1>
    <p>Beginning with the 2025 edition, results are recorded here under the “New Era”. Historical records through 2024 remain on the Historical Results page.</p>
  </div>

  <script>
    // Hide carousel if no slides yet; build dots; wire controls (no dependencies)
    (function () {
      const carousel = document.getElementById('carousel');
      const track = document.getElementById('carouselTrack');
      const dotsWrap = document.getElementById('carouselDots');
      const prev = carousel.querySelector('.prev');
      const next = carousel.querySelector('.next');

      const slides = Array.from(track.children);
      if (!slides.length) {
        carousel.classList.add('hidden');
        return;
      }

      // Build dots
      slides.forEach((_, i) => {
        const b = document.createElement('button');
        b.className = 'dot' + (i === 0 ? ' active' : '');
        b.type = 'button';
        b.addEventListener('click', () => {
          track.scrollTo({ left: i * track.clientWidth, behavior: 'smooth' });
        });
        dotsWrap.appendChild(b);
      });

      // Update active dot on scroll
      const updateDots = () => {
        const idx = Math.round(track.scrollLeft / track.clientWidth);
        dotsWrap.querySelectorAll('.dot').forEach((d, i) => {
          d.classList.toggle('active', i === idx);
        });
      };
      track.addEventListener('scroll', () => {
        // throttle a bit
        window.requestAnimationFrame(updateDots);
      });

      // Prev/Next
      prev.addEventListener('click', () => {
        const idx = Math.round(track.scrollLeft / track.clientWidth);
        const target = Math.max(0, idx - 1);
        track.scrollTo({ left: target * track.clientWidth, behavior: 'smooth' });
      });
      next.addEventListener('click', () => {
        const idx = Math.round(track.scrollLeft / track.clientWidth);
        const target = Math.min(slides.length - 1, idx + 1);
        track.scrollTo({ left: target * track.clientWidth, behavior: 'smooth' });
      });

      // Resize handler keeps slides aligned
      window.addEventListener('resize', () => {
        const idx = Math.round(track.scrollLeft / track.clientWidth);
        track.scrollTo({ left: idx * track.clientWidth });
      }, { passive: true });
    })();

    // Keep for parity with other pages; only one year for now.
    document.getElementById('yearSelect').addEventListener('change', () => {
      document.getElementById('resultsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  </script>

  <!-- Shared nav loader -->
  <script defer src="assets/js/nav.js"></script>
</body>
</html>
